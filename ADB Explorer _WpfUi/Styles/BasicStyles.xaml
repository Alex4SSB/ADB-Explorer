<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:ADB_Explorer.Controls"
    xmlns:helpers="clr-namespace:ADB_Explorer.Helpers"
    xmlns:models="clr-namespace:ADB_Explorer.Models"
    xmlns:strings="clr-namespace:ADB_Explorer.Strings"
    xmlns:sys="clr-namespace:System;assembly=System.Runtime"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml">
    <FontFamily x:Key="ConsoleFont">Cascadia Mono, Consolas</FontFamily>
    <FontFamily x:Key="FluentSymbolThemeFontFamily">Segoe Fluent Icons, Segoe MDL2 Assets</FontFamily>
    <sys:Double x:Key="DataGridColumnHeaderHeight">30.0</sys:Double>
    <Thickness x:Key="DataGridScrollContentPresenterMargin">0,3,0,0</Thickness>
    <Style x:Key="TextBlockStyle" TargetType="TextBlock">
        <Setter Property="TextWrapping" Value="Wrap" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.RuntimeSettings}, Path=IsRTL, Mode=OneTime}" Value="True">
                <Setter Property="FlowDirection" Value="RightToLeft" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="GlyphFont" TargetType="ui:FontIcon">
        <Setter Property="FontFamily" Value="{StaticResource FluentSymbolThemeFontFamily}" />
        <Setter Property="ToolTipService.InitialShowDelay" Value="400" />
    </Style>
    <Style BasedOn="{StaticResource GlyphFont}" TargetType="ui:FontIcon" />
    <Style
        x:Key="DisabledGlyphStyle"
        BasedOn="{StaticResource GlyphFont}"
        TargetType="ui:FontIcon">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="Gray" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style
        x:Key="DisabledButtonGlyphStyle"
        BasedOn="{StaticResource GlyphFont}"
        TargetType="ui:FontIcon">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="{DynamicResource AdbButtonForegroundPressedOrDisabled}" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="FocusVisualRoundedStyle" BasedOn="{StaticResource HighVisibilityFocusVisual}">
        <Setter Property="Control.Template">
            <!--  Template copied from ModernWPF to be modified  -->
            <Setter.Value>
                <ControlTemplate>
                    <!--
                        BorderBrush="{TemplateBinding ui:FocusVisualHelper.FocusVisualPrimaryBrush}"
                        BorderThickness="{TemplateBinding ui:FocusVisualHelper.FocusVisualPrimaryThickness}"
                    -->
                    <Border CornerRadius="5" SnapsToDevicePixels="True">
                        <Border CornerRadius="5" />
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="BorderStyle" TargetType="Border">
        <Setter Property="CornerRadius" Value="5" />
        <Setter Property="BorderThickness" Value="1" />
    </Style>
    <Style x:Key="SplitViewBorderStyle" TargetType="Border">
        <Setter Property="Background" Value="{DynamicResource DevicesListBackground}" />
    </Style>
    <Style
        x:Key="DeviceBorderStyle"
        BasedOn="{StaticResource BorderStyle}"
        TargetType="Border">
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                <Setter Property="BorderBrush" Value="{DynamicResource DeviceConnectionPanelBorder}" />
            </DataTrigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="BorderBrush" Value="{DynamicResource DeviceConnectionPanelBorder}" />
            </Trigger>
        </Style.Triggers>
        <Setter Property="BorderBrush" Value="Transparent" />
    </Style>
    <Style x:Key="DisabledTextBlockStyle" TargetType="TextBlock">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="Gray" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <Style x:Key="DisabledButtonTextBlockStyle" TargetType="TextBlock">
        <Style.Triggers>
            <Trigger Property="IsEnabled" Value="False">
                <Setter Property="Foreground" Value="{DynamicResource AdbButtonForegroundPressedOrDisabled}" />
            </Trigger>
        </Style.Triggers>
    </Style>
    <LinearGradientBrush x:Key="RedStripedBrush" SpreadMethod="Repeat" StartPoint="0,0" EndPoint="0.15,0">
        <LinearGradientBrush.RelativeTransform>
            <TransformGroup>
                <ScaleTransform CenterX="0.5" CenterY="0.5" />
                <SkewTransform CenterX="0.5" CenterY="0.5" />
                <RotateTransform Angle="1" CenterX="0.5" CenterY="0.5" />
            </TransformGroup>
        </LinearGradientBrush.RelativeTransform>
        <GradientStop Offset="0.4" Color="Transparent" />
        <GradientStop Offset="0.4" Color="#FFC50500" />
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="LightFluentAccentButtonBorderBrush" ColorInterpolationMode="SRgbLinearInterpolation" MappingMode="Absolute" Opacity="1" SpreadMethod="Pad" EndPoint="0,3">
        <GradientStopCollection>
            <GradientStop Offset="0.33" Color="{DynamicResource LightFluentAccentButtonBorderGradient1}" />
            <GradientStop Offset="1" Color="{DynamicResource LightFluentAccentButtonBorderGradient2}" />
        </GradientStopCollection>
        <LinearGradientBrush.RelativeTransform>
            <ScaleTransform CenterX="0" CenterY="0.5" ScaleX="1" ScaleY="-1" />
        </LinearGradientBrush.RelativeTransform>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="DarkFluentAccentButtonBorderBrush" ColorInterpolationMode="SRgbLinearInterpolation" MappingMode="Absolute" Opacity="1" SpreadMethod="Pad" EndPoint="0,3">
        <GradientStopCollection>
            <GradientStop Offset="0.33" Color="{DynamicResource DarkFluentAccentButtonBorderGradient1}" />
            <GradientStop Offset="1" Color="{DynamicResource DarkFluentAccentButtonBorderGradient2}" />
        </GradientStopCollection>
        <LinearGradientBrush.RelativeTransform>
            <ScaleTransform CenterX="0" CenterY="0.5" ScaleX="1" ScaleY="-1" />
        </LinearGradientBrush.RelativeTransform>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="LightFluentButtonBorderBrush" ColorInterpolationMode="SRgbLinearInterpolation" MappingMode="Absolute" Opacity="1" SpreadMethod="Pad" EndPoint="0,3">
        <GradientStopCollection>
            <GradientStop Offset="0.33" Color="{DynamicResource LightFluentButtonBorderGradient1}" />
            <GradientStop Offset="1" Color="{DynamicResource LightFluentButtonBorderGradient2}" />
        </GradientStopCollection>
        <LinearGradientBrush.RelativeTransform>
            <ScaleTransform CenterX="0" CenterY="0.5" ScaleX="1" ScaleY="-1" />
        </LinearGradientBrush.RelativeTransform>
    </LinearGradientBrush>
    <LinearGradientBrush x:Key="DarkFluentButtonBorderBrush" ColorInterpolationMode="SRgbLinearInterpolation" MappingMode="Absolute" Opacity="1" SpreadMethod="Pad" EndPoint="0,3">
        <GradientStopCollection>
            <GradientStop Offset="0.33" Color="{DynamicResource DarkFluentButtonBorderGradient1}" />
            <GradientStop Offset="1" Color="{DynamicResource DarkFluentButtonBorderGradient2}" />
        </GradientStopCollection>
        <LinearGradientBrush.RelativeTransform>
            <ScaleTransform CenterX="0" CenterY="0.5" ScaleX="1" ScaleY="-1" />
        </LinearGradientBrush.RelativeTransform>
    </LinearGradientBrush>
    <sys:Double x:Key="AccentButtonBackgroundMouseOverOpacity">0.9</sys:Double>
    <sys:Double x:Key="AccentButtonBackgroundPressedOpacity">0.8</sys:Double>
    <sys:Double x:Key="AccentButtonForegroundPressedOrDisabledOpacity">0.5</sys:Double>
    <ContextMenu x:Key="VScrollBarContextMenu" x:Shared="true">
        <MenuItem
            Command="ScrollBar.ScrollHereCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollHereCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.ScrollToTopCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollToTopCommand}}" />
        <MenuItem
            Command="ScrollBar.ScrollToBottomCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollToBottomCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.PageUpCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_PageUpCommand}}" />
        <MenuItem
            Command="ScrollBar.PageDownCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_PageDownCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.LineUpCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_LineUpCommand}}" />
        <MenuItem
            Command="ScrollBar.LineDownCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_LineDownCommand}}" />
    </ContextMenu>
    <ContextMenu x:Key="HScrollBarContextMenu" x:Shared="true">
        <MenuItem
            Command="ScrollBar.ScrollHereCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollHereCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.ScrollToLeftEndCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollToLeftEndCommand}}" />
        <MenuItem
            Command="ScrollBar.ScrollToRightEndCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_ScrollToRightEndCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.PageLeftCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_PageLeftCommand}}" />
        <MenuItem
            Command="ScrollBar.PageRightCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_PageRightCommand}}" />
        <Separator Margin="-8,0" />
        <MenuItem
            Command="ScrollBar.LineLeftCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_LineLeftCommand}}" />
        <MenuItem
            Command="ScrollBar.LineRightCommand"
            CommandTarget="{Binding Path=PlacementTarget, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContextMenu}}}"
            Header="{Binding Source={x:Static Member=strings:Resources.ScrollBar_LineRightCommand}}" />
    </ContextMenu>
    <!--<Style BasedOn="{StaticResource DefaultScrollBarStyle}" TargetType="ScrollBar">
        <Style.Triggers>
            <Trigger Property="Orientation" Value="Vertical">
                <Setter Property="ContextMenu" Value="{StaticResource VScrollBarContextMenu}" />
            </Trigger>
            <Trigger Property="Orientation" Value="Horizontal">
                <Setter Property="ContextMenu" Value="{StaticResource HScrollBarContextMenu}" />
            </Trigger>
        </Style.Triggers>
    </Style>-->
    <!--<Style
        x:Key="ScrollViewerStyle"
        BasedOn="{StaticResource DefaultScrollViewerStyle}"
        TargetType="ScrollViewer">
    -->
    <!--<Setter Property="ui:ScrollViewerHelper.AutoHideScrollBars" Value="True" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.RuntimeSettings}, Path=UseFluentStyles}" Value="False">
                <Setter Property="ui:ScrollViewerHelper.AutoHideScrollBars" Value="False" />
            </DataTrigger>
        </Style.Triggers>-->
    <!--
    </Style>-->
    <!--<Style BasedOn="{StaticResource ScrollViewerStyle}" TargetType="ScrollViewer" />-->
    <Style BasedOn="{StaticResource DefaultUiHyperlinkButtonStyle}" TargetType="ui:HyperlinkButton">
        <Setter Property="ToolTipService.InitialShowDelay" Value="400" />
        <Setter Property="Foreground" Value="{DynamicResource HyperLinkBrush}" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.RuntimeSettings}, Path=IsRTL, Mode=OneTime}" Value="True">
                <Setter Property="FlowDirection" Value="RightToLeft" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
    <Style TargetType="GridSplitter">
        <Setter Property="IsTabStop" Value="False" />
    </Style>
    <Style TargetType="ContentPresenter">
        <Setter Property="ToolTipService.InitialShowDelay" Value="400" />
    </Style>
    <Style x:Key="MarginedTextBlockStyle" TargetType="TextBlock">
        <Setter Property="Margin" Value="0,4" />
    </Style>
    <Grid
        x:Key="WarningIcon"
        Margin="0,-4,4,0"
        x:Shared="False">
        <ui:FontIcon
            FontWeight="Bold"
            Foreground="{StaticResource EditorTextChangedBrush}"
            Glyph="&#xF13A;" />
        <ui:FontIcon
            FontWeight="Bold"
            Foreground="Black"
            Glyph="&#xF13B;" />
    </Grid>
    <Style
        x:Key="AdbMenuStyle"
        BasedOn="{StaticResource DefaultMenuStyle}"
        TargetType="controls:AdbMenu" />
    <Style
        x:Key="AdbCardControl"
        BasedOn="{StaticResource DefaultUiCardControlStyle}"
        TargetType="ui:CardControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ui:CardControl}">
                    <Border
                        x:Name="ContentBorder"
                        Width="{TemplateBinding Width}"
                        Height="{TemplateBinding Height}"
                        MinWidth="{TemplateBinding MinWidth}"
                        MinHeight="{TemplateBinding MinHeight}"
                        Padding="0"
                        HorizontalAlignment="{TemplateBinding HorizontalAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalAlignment}"
                        Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}"
                        CornerRadius="{TemplateBinding CornerRadius}">
                        <Grid HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <Grid Margin="{TemplateBinding Padding}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <ContentControl
                                    x:Name="ControlIcon"
                                    Grid.Column="0"
                                    Margin="{StaticResource CardControlIconMargin}"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Icon}"
                                    Focusable="False"
                                    FontSize="{StaticResource CardControlIconSize}"
                                    Foreground="{TemplateBinding Foreground}"
                                    KeyboardNavigation.IsTabStop="False" />
                                <ContentPresenter
                                    x:Name="HeaderContentPresenter"
                                    Grid.Column="1"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Header}"
                                    TextElement.Foreground="{TemplateBinding Foreground}" />
                            </Grid>
                            <ContentPresenter
                                x:Name="HeaderBottomContentPresenter"
                                Grid.Row="1"
                                Grid.ColumnSpan="2"
                                Margin="0,0,0,-1"
                                VerticalAlignment="Bottom"
                                Content="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=(helpers:ExpanderHelper.HeaderBottomContent)}" />
                            <Border
                                Grid.Row="2"
                                Grid.ColumnSpan="2"
                                Margin="0"
                                Padding="{TemplateBinding Padding}"
                                Background="{DynamicResource CardBackground}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="0,1,0,0"
                                CornerRadius="0,0,4,4">
                                <ContentPresenter
                                    x:Name="ContentPresenter"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Content}"
                                    TextElement.Foreground="{TemplateBinding Foreground}" />
                            </Border>
                        </Grid>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Content" Value="{x:Null}">
                            <Setter TargetName="ContentPresenter" Property="Margin" Value="0" />
                        </Trigger>
                        <Trigger Property="Content" Value="">
                            <Setter TargetName="ContentPresenter" Property="Margin" Value="0" />
                        </Trigger>
                        <Trigger Property="Header" Value="{x:Null}">
                            <Setter TargetName="ControlIcon" Property="Margin" Value="0" />
                        </Trigger>
                        <Trigger Property="Header" Value="">
                            <Setter TargetName="ControlIcon" Property="Margin" Value="0" />
                        </Trigger>
                        <Trigger Property="Icon" Value="{x:Null}">
                            <Setter TargetName="ControlIcon" Property="Margin" Value="0" />
                            <Setter TargetName="ControlIcon" Property="Visibility" Value="Collapsed" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style
        x:Key="DataGridColumnHeaderStyle"
        BasedOn="{StaticResource DefaultUiDataGridColumnHeaderStyle}"
        TargetType="DataGridColumnHeader">
        <!--  BasedOn="{StaticResource AdbDataGridColumnHeaderStyle}"  -->
        <!--<Setter Property="Background" Value="Transparent" />-->
        <!--<Setter Property="Foreground" Value="{DynamicResource ButtonForeground}" />-->
        <Setter Property="FontWeight" Value="Regular" />
    </Style>

    <Style
        x:Key="ExplorerGridStyle"
        BasedOn="{StaticResource DefaultUiDataGridStyle}"
        TargetType="ui:DataGrid">
        <Setter Property="MinRowHeight" Value="32" />
        <Style.Triggers>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.FileActions}, Path=IsExplorerVisible}" Value="False">
                <Setter Property="Visibility" Value="Collapsed" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.FileActions}, Path=IsRecycleBin}" Value="False">
                <Setter Property="AllowDrop" Value="True" />
            </DataTrigger>
        </Style.Triggers>
    </Style>

    <!--<Style BasedOn="{StaticResource DataGridStyle}" TargetType="DataGrid" />-->

    <Style x:Key="FluentDataGridRowBorderStyle" TargetType="Border">
        <Setter Property="CornerRadius" Value="3" />
        <Setter Property="Margin" Value="0,2" />
    </Style>

    <ControlTemplate x:Key="DataGridRowTemplate" TargetType="DataGridRow">
        <Border
            x:Name="RowBorder"
            HorizontalAlignment="Left"
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            SnapsToDevicePixels="True"
            Style="{StaticResource FluentDataGridRowBorderStyle}">
            <DataGridCellsPresenter ItemsPanel="{TemplateBinding ItemsPanel}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
        </Border>
    </ControlTemplate>

    <Storyboard
        x:Key="EnterDragStoryboard"
        Storyboard.TargetProperty="(helpers:SelectionHelper.SelectionInProgress)"
        Duration="00:00:00.0">
        <BooleanAnimationUsingKeyFrames BeginTime="00:00:00.0">
            <DiscreteBooleanKeyFrame KeyTime="00:00:00.0" Value="True" />
        </BooleanAnimationUsingKeyFrames>
    </Storyboard>

    <Storyboard
        x:Key="LeaveDragStoryboard"
        Storyboard.TargetProperty="(helpers:SelectionHelper.SelectionInProgress)"
        Duration="00:00:00.0">
        <BooleanAnimationUsingKeyFrames BeginTime="00:00:00.0">
            <DiscreteBooleanKeyFrame KeyTime="00:00:00.0" Value="False" />
        </BooleanAnimationUsingKeyFrames>
    </Storyboard>

    <Style x:Key="BaseRowStyle" TargetType="DataGridRow">
        <Setter Property="helpers:SelectionHelper.SelectionInProgress" Value="False" />
        <Setter Property="Background" Value="{DynamicResource ControlBackground}" />
        <Setter Property="Visibility" Value="Visible" />
        <Setter Property="AllowDrop" Value="False" />
        <!--<Setter Property="ui:ControlHelper.CornerRadius" Value="2" />-->
        <Setter Property="Margin" Value="3,0,0,0" />
        <Setter Property="Template" Value="{StaticResource DataGridRowTemplate}" />
        <Style.Triggers>
            <EventTrigger RoutedEvent="PreviewDragEnter">
                <BeginStoryboard Storyboard="{StaticResource EnterDragStoryboard}" />
            </EventTrigger>
            <EventTrigger RoutedEvent="PreviewDragLeave">
                <BeginStoryboard Storyboard="{StaticResource LeaveDragStoryboard}" />
            </EventTrigger>
            <EventTrigger RoutedEvent="MouseLeave">
                <BeginStoryboard Storyboard="{StaticResource LeaveDragStoryboard}" />
            </EventTrigger>
            <Trigger Property="helpers:SelectionHelper.SelectionInProgress" Value="True">
                <Setter Property="Background" Value="{DynamicResource MouseOverBackground}" />
            </Trigger>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="{DynamicResource MouseOverBackground}" />
            </Trigger>
            <Trigger Property="IsSelected" Value="True">
                <Setter Property="Background" Value="{DynamicResource SelectedBackground}" />
            </Trigger>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.FileActions}, Path=IsAppDrive}" Value="False">
                <Setter Property="AllowDrop" Value="{Binding IsDirectory}" />
            </DataTrigger>
            <DataTrigger Binding="{Binding Source={x:Static Member=models:Data.FileActions}, Path=IsAppDrive}" Value="True">
                <Setter Property="AllowDrop" Value="True" />
            </DataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsSelected}" Value="True" />
                    <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=IsActive}" Value="False" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Background" Value="{DynamicResource SelectedInactiveBackground}" />
            </MultiDataTrigger>
            <MultiDataTrigger>
                <MultiDataTrigger.Conditions>
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsMouseOver}" Value="True" />
                    <Condition Binding="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsSelected}" Value="True" />
                    <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType=Window, Mode=FindAncestor}, Path=IsActive}" Value="False" />
                </MultiDataTrigger.Conditions>
                <Setter Property="Background" Value="{DynamicResource SelectedMouseOverInactiveBackground}" />
            </MultiDataTrigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary>
